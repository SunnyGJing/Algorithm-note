> Creat time: 2019-12-19晚上  
> Update time: 2022-2-11  

### [剑指 Offer 44.【Medium】数字序列中某一位的数字](https://leetcode-cn.com/problems/shu-zi-xu-lie-zhong-mou-yi-wei-de-shu-zi-lcof/)
#### 题目描述
给定序列化的数字序列“01234567891011121314……”，写一个函数，求任意第n位的数字。  
例如，第5位是5，第13位是1，第19位是4.  

- Example 1:
    ```
    Input: n = 3
    Output: 3
    ```
- Example 2:
    ```
    Input: n = 3
    Output: 3
    ```
- 限制：  
  `0 <= n < 2^31`

- 本题与[主站 400 题](https://leetcode-cn.com/problems/nth-digit/)相同

#### 解法

一道数学规律题目，按照数字的位数，可以分为不同区间（如下所示）。
```
    区间A  区间B   区间C  区间D  ...
    (1位)  (2位)   (3位)  (4位)
  |------|------|------|------| ...
10^0   10^1   10^2   10^3   10^4
 (1)   (10)   (100)  (1000) (10000) 

 区间A的数字位数共    9位，因为   (10 - 1)    * 1 = 9
 区间B的数字位数共  180位，因为  (100 - 10)   * 2 = 180
 区间C的数字位数共 2700位，因为 (1000 - 100)  * 3 = 2700
 区间D的数字位数共36000位，因为(10000 - 1000) * 4 = 36000
 ...
```
以`n = 11`为例，
- 第一步，判断第11位数字在哪个区间
  - 因为 11 - 9 = 2，而 2 < 180，所以第11位数字在区间B。
- 第二步，判断第11位数字是哪个数的一部分
  - 因为 11 - 9 = 2，且区间 B 的位数为 2 位，而 2 // 2 = 1，所以第11位数字是区间 B 的第 1 个数的一部分，也就是10。
- 第三步，判断第11位数字是10的哪个数字
  - 因为 11 - 9 - 1 = 1，且区间 B 的位数为 2 位，而 1 % 2 = 0，所以第11位数字是10的下标为 1 的数字，也就是0。
#### 代码
##### python版
```python
class Solution:
    def findNthDigit(self, n: int) -> int:
        if n < 0: return -1
        
        digit = 1
        cnt = 10 ** digit - 1
        while n > cnt: # 用上界cnt判断第n位的数字位于哪个区间
            n -= cnt
            digit += 1
            # 此时cnt计算为下一轮准备
            # cnt = 当前区间的数字的位数一共有多少
            cnt = (10 ** digit - 10 ** (digit - 1)) * digit

        n -= 1  # 为了方便按下标取字符串的某一位
        item = 10 ** (digit - 1) + (n // digit)
        res =  int(str(item)[(n % digit)])
        return res
```

##### cpp版  
```cpp
class Solution {
public:
    int digitAtIndex(int count) {
        if(n<=0) return -1;
        
        // 从区间[0,9]开始，迭代求得原数是几位数bits
        // 以及球的原数在所属的区间中是第几个数字count
        int bits = 1;
        while(count > 9*(10^(bits-1))*bits) {
            count -= 9*(10^(bits-1))*bits;
            ++bits;
        }

        // index记录第count位数字是原数的第几位
        // 以325为例，第0位是3、第2位是5
        // preMaxNum是上个区间最大的数字
        // 最终求得原数num
        int index = count % bits;
        int preMaxNum = 10^(bits-1)-1;
        int num = (count-index)/bits + preMaxNum;
        string str = to_string(num);

        // 返回原数的第index位数值
        return str[index];
    }
}