"""
Creat time: 2019-09-24 11：49
TimeToCode：Unknown
Last modified time: 

给定一个数字序列，判断是不是二叉搜索树的后序遍历序列。

注意：如果子树为空，就直接跳过递归该子树。
"""

class Solution {
public:
    bool VerifySquenceOfBST(vector<int> sequence) {
        if(sequence.empty()) return false;
        int root = sequence.size()-1;
        return subVerifyBSF(sequence,0,root);
    }

    bool subVerifyBSF(vector<int> a, int low, int high) {
        if(low==high) return true;
        int end_lower = high-1;
        while(end_lower >= low && a[end_lower] > a[high])
            end_lower--;
        int start_lower = end_lower;
        while(start_lower >= low && a[start_lower] < a[high])
            start_lower--;
        if(start_lower != low-1)
            return false;
        return (end_lower+1 == high || subVerifyBSF(a, end_lower+1, high-1))
             && (end_lower==low-1 || subVerifyBSF(a, low, end_lower));
    }
};